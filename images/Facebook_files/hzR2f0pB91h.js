/*!CK:2496087701!*//*1385952534,173203031*/

if (self.CavalryLogger) { CavalryLogger.start_js(["xxkbu"]); }

__d("PopoverMenu.react",["CSS","InlineBlock.react","Popover","PopoverMenu","React","ReactPropTypes","SubscriptionsHandler","cx","joinClasses","areEqual"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('InlineBlock.react'),i=b('Popover'),j=b('PopoverMenu'),k=b('React'),l=b('ReactPropTypes'),m=b('SubscriptionsHandler'),n=b('cx'),o=b('joinClasses'),p=b('areEqual'),q=k.createClass({displayName:'ReactPopoverMenu',propTypes:{alignh:l.oneOf(['left','center','right']),layerBehaviors:l.array,menu:l.object,disabled:l.bool},_menuSubscriptions:null,componentDidMount:function(){var r=this.refs.root.getDOMNode(),s=r.firstChild;g.addClass(s,"_p");this._popover=new i(r,s,this.props.layerBehaviors,{alignh:this.props.alignh,disabled:this.props.disabled});this._popoverMenu=new j(this._popover,s,this._createMenu(this.props.menu),this.props.behaviors);},componentDidUpdate:function(r){if(!p(r.menu,this.props.menu)){if(this._menuSubscriptions){this._menuSubscriptions.release();this._menuSubscriptions=null;}this._popoverMenu.setMenu(this._createMenu(this.props.menu));}if(this.props.alignh!==r.alignh)this._popoverMenu.getPopover().getLayer().setAlignment(this.props.alignh);if(this.props.disabled!==r.disabled)if(this.props.disabled){this._popoverMenu.disable();}else this._popoverMenu.enable();},getFirstChild:function(){var r=this.props.children;return Array.isArray(r)?r[0]:r;},getButtonSize:function(){var r=this.getFirstChild();return r&&r.getButtonSize();},render:function(){var r=this.getFirstChild();r.props.className=o(r.props.className||'',"_p");return this.transferPropsTo(h({alignv:"middle",className:"uiPopover",ref:"root",disabled:null},this.props.children));},componentWillUnmount:function(){if(this._menuSubscriptions){this._menuSubscriptions.release();this._menuSubscriptions=null;}},_createMenu:function(r){var s=new r.ctor(r.menuitems,r.config);this._menuSubscriptions=new m();if(r.onItemClick)this._menuSubscriptions.addSubscriptions(s.subscribe('itemclick',r.onItemClick));if(r.onChange)this._menuSubscriptions.addSubscriptions(s.subscribe('change',r.onChange));if(this.props.onShow)this._menuSubscriptions.addSubscriptions(this._popover.subscribe('show',this.props.onShow));if(this.props.onHide)this._menuSubscriptions.addSubscriptions(this._popover.subscribe('hide',this.props.onHide));return s;},showPopover:function(r){this._popover.showLayer();if(r){var s=this._popoverMenu.getMenu();s.blur();s.focusAnItem(r);}},hidePopover:function(){this._popover.hideLayer();}});e.exports=q;});
__d("Menu",["CSS","DataStore","DOM","Event","Keys","Parent","PopoverMenuInterface","ScrollableArea","Style","copyProperties","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DataStore'),i=b('DOM'),j=b('Event'),k=b('Keys'),l=b('Parent'),m=b('PopoverMenuInterface'),n=b('ScrollableArea'),o=b('Style'),p=b('copyProperties'),q=b('cx');for(var r in m)if(m.hasOwnProperty(r))t[r]=m[r];var s=m===null?null:m.prototype;t.prototype=Object.create(s);t.prototype.constructor=t;t.__superConstructor__=m;function t(u,v){"use strict";m.call(this);this._items=[];for(var w=0;w<u.length;w++)this._items[w]=new u[w].ctor(u[w]);this._config=v||{};this._theme=v.theme||{};}t.prototype.addItem=function(u){"use strict";this._addItem(u);};t.prototype.addItemBefore=function(u,v){"use strict";this._addItem(u,v,false);};t.prototype.addItemAfter=function(u,v){"use strict";this._addItem(u,v,true);};t.prototype._addItem=function(u,v,w){"use strict";var x=this._items.indexOf(u);if(x>=0){var y=w?-1:1;if(this._items[x+y]==v)return;this._items.splice(x,1);}if(v){x=this._items.indexOf(v);if(x<0)throw new Error('reference item must already be in the menu');if(w)x++;this._items.splice(x,0,u);}else this._items.push(u);if(this._root)this._insertItem(u,v,w);};t.prototype.removeItem=function(u){"use strict";var v=this._items.indexOf(u);if(v<0)return;this._items.splice(v,1);this._root&&i.remove(u.getRoot());};t.prototype.forEachItem=function(u){"use strict";this._items.forEach(u);};t.prototype.getItemAt=function(u){"use strict";return this._items[u]||null;};t.prototype.getRoot=function(){"use strict";if(!this._root)this._render();return this._root;};t.prototype.onShow=function(){"use strict";if(this._config.maxheight)if(!this._scrollableArea){this._scrollableArea=n.fromNative(this._scrollableElems.root,{fade:true});}else this._scrollableArea.resize();};t.prototype.onHide=function(){"use strict";this.blur();};t.prototype.focusAnItem=function(u){"use strict";return this._attemptFocus(u||0,1);};t.prototype.blur=function(){"use strict";if(this._focused){this._focused.blur();this._focused=null;this.inform('blur');}};t.prototype.handleKeydown=function(u,v){"use strict";var w=this._items.indexOf(this._focused);switch(u){case k.UP:case k.DOWN:var x=u===k.UP?-1:1;if(w!==-1){return this._attemptFocus(w+x,x);}else if(u===k.UP){return this._attemptFocus(this._items.length-1,-1);}else return this._attemptFocus(0,1);break;case k.SPACE:if(this._items.indexOf(this._focused)!==-1){this._handleItemClick(this._focused,v);return true;}return false;default:var y=String.fromCharCode(u).toLowerCase(),z;for(var aa=w+1;aa<this._items.length;aa++){z=this._items[aa].getAccessKey();if(z&&z.charAt(0).toLowerCase()===y)if(this._focusItem(this._items[aa]))return true;}return false;}};t.prototype._render=function(){"use strict";this._ul=i.create('ul',{className:"_54nf"});this._ul.setAttribute('role','menu');this._items.forEach(function(w){this._insertItem(w,null);}.bind(this));j.listen(this._ul,'click',this._handleClick.bind(this));j.listen(this._ul,'mouseover',this._handleMouseOver.bind(this));j.listen(this._ul,'mouseout',this._handleMouseOut.bind(this));var u=this._ul;if(this._config.maxheight){this._scrollableElems=n.renderDOM();i.setContent(this._scrollableElems.content,this._ul);u=this._scrollableElems.root;o.set(this._scrollableElems.wrap,'max-height',this._config.maxheight+'px');}var v="_54nq"+(this._config.className?' '+this._config.className:'')+(this._theme.className?' '+this._theme.className:'');this._root=i.create('div',{className:v},i.create('div',{className:"_54ng"},u));this._config.id&&this._root.setAttribute('id',this._config.id);this.inform('rendered',this._root);};t.prototype._needsDefaultBehavior=function(u){"use strict";if(u.isDefaultRequested&&u.isDefaultRequested()){var v=l.byTag(u.getTarget(),'a'),w=v&&v.getAttribute('href');return w&&w[0]!=='#';}return false;};t.prototype._handleClick=function(u){"use strict";if(!this._needsDefaultBehavior(u)){var v=this._getItemInstance(u.getTarget());if(v)return this._handleItemClick(v,u);}};t.prototype._handleItemClick=function(u,v){"use strict";this.inform('itemclick',{item:u,event:v});if(u.hasAction())this.done();return u.handleClick();};t.prototype._handleMouseOver=function(u){"use strict";var v=this._getItemInstance(u.getTarget());v&&this._focusItem(v,true);};t.prototype._handleMouseOut=function(u){"use strict";var v=this._getItemInstance(u.getTarget());if(v&&this._focused===v)this.blur();};t.prototype._insertItem=function(u,v,w){"use strict";var x=u.getRoot();g.addClass(x,'__MenuItem');h.set(x,'MenuItem',u);if(v){var y=w?i.insertAfter:i.insertBefore;y(v.getRoot(),x);}else i.appendContent(this._ul,x);};t.prototype._attemptFocus=function(u,v){"use strict";var w=this.getItemAt(u);if(w)if(this._focusItem(w)){return true;}else return this._attemptFocus(u+v,v);return false;};t.prototype._focusItem=function(u,v){"use strict";if(u.focus(v)!==false){if(this._focused!==u){this.blur();this._focused=u;this.inform('focus');}return true;}return false;};t.prototype._getItemInstance=function(u){"use strict";var v=l.byClass(u,'__MenuItem');return v?h.get(v,'MenuItem'):null;};p(t.prototype,{_focused:null,_root:null});e.exports=t;});
__d("MenuItemInterface",["copyProperties","emptyFunction"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('emptyFunction');function i(){"use strict";}i.prototype.getRoot=function(){"use strict";if(!this._root)this._root=this.render();return this._root;};g(i.prototype,{_root:null,render:h,getAccessKey:h,hasAction:h.thatReturnsFalse,focus:h.thatReturnsFalse,blur:h.thatReturnsFalse,handleClick:h.thatReturnsFalse});e.exports=i;});
__d("MenuItemBase",["DOM","HTML","MenuItemInterface","cx"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('HTML'),i=b('MenuItemInterface'),j=b('cx');for(var k in i)if(i.hasOwnProperty(k))m[k]=i[k];var l=i===null?null:i.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=i;function m(n){"use strict";i.call(this);this._data=n;}m.prototype.render=function(){"use strict";var n="_54ni";if(this._data.className)n+=' '+this._data.className;var o={className:n,'aria-selected':'false'};for(var p in this._data)if(p.indexOf('data-')===0)o[p]=this._data[p];return g.create('li',o,this._renderItemContent());};m.prototype._renderItemContent=function(){"use strict";return h(this._data.markup).getNodes();};e.exports=m;});
__d("MenuItem",["CSS","DOM","MenuItemBase","React","copyProperties","cx","emptyFunction","startsWith"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('MenuItemBase'),j=b('React'),k=b('copyProperties'),l=b('cx'),m=b('emptyFunction'),n=b('startsWith'),o=['href','rel','ajaxify','target'];function p(u,v){var w={};o.forEach(function(x){if(x in v)w[x]=v[x];});h.setAttributes(u,w);}function q(u){o.forEach(function(v){u.removeAttribute(v);});}for(var r in i)if(i.hasOwnProperty(r))t[r]=i[r];var s=i===null?null:i.prototype;t.prototype=Object.create(s);t.prototype.constructor=t;t.__superConstructor__=i;function t(u){"use strict";i.call(this,u);this._disabled=!!this._data.disabled;}t.prototype.getValue=function(){"use strict";return this._data.value;};t.prototype.getAccessKey=function(){"use strict";return this._data.label&&this._data.label.charAt(0);};t.prototype.focus=function(u){"use strict";if(this.isDisabled()||!this._root.offsetParent)return false;g.addClass(this._root,"_54ne");g.addClass(this._root,'selected');this._root.setAttribute('aria-selected','true');u||this._anchor.focus();};t.prototype.blur=function(){"use strict";g.removeClass(this._root,"_54ne");g.removeClass(this._root,'selected');this._root.setAttribute('aria-selected','false');};t.prototype.handleClick=function(){"use strict";if(this.isDisabled())return false;if(typeof this._onclickHandler==='function')return this._onclickHandler();return true;};t.prototype.setOnClickHandler=function(u){"use strict";this._onclickHandler=u;};t.prototype._renderItemContent=function(){"use strict";this._anchor=h.create('a',{className:"_54nc",tabIndex:this.isDisabled()?-1:0});if(this._data.reactChildren){j.renderComponent(j.DOM.span({className:"_54nh"},this._data.reactChildren),this._anchor);this._data.label=this._anchor.innerText||this._anchor.textContent;}else h.setContent(this._anchor,h.create('span',{className:"_54nh"},this._data.markup||this._data.label));if(this._data.icon){h.prependContent(this._anchor,this._data.icon);g.addClass(this._anchor,"_54nu");}if(!this.isDisabled())p(this._anchor,this._data);for(var u in this._data)if(typeof u==='string'&&n(u,'data-'))this._anchor.setAttribute(u,this._data[u]);this._anchor.setAttribute('role','menuitem');var v=this._data.title;v&&this._anchor.setAttribute('title',v);return this._anchor;};t.prototype.isDisabled=function(){"use strict";return this._disabled;};t.prototype.enable=function(){"use strict";p(this._anchor,this._data);this._anchor.tabIndex=0;g.removeClass(this._root,"_5arm");this._disabled=false;};t.prototype.disable=function(){"use strict";q(this._anchor);this._anchor.tabIndex=-1;g.addClass(this._root,"_5arm");this._disabled=true;};t.prototype.render=function(){"use strict";var u=s.render.call(this);if(this._data.disabled)g.addClass(u,"_5arm");return u;};k(t.prototype,{hasAction:m.thatReturnsTrue});e.exports=t;});
__d("MenuSelectableItem",["CSS","MenuItem","copyProperties","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('MenuItem'),i=b('copyProperties'),j=b('cx');for(var k in h)if(h.hasOwnProperty(k))m[k]=h[k];var l=h===null?null:h.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=h;function m(n){"use strict";h.call(this,n);this._selected=!!this._data.selected;}m.prototype.getLabel=function(){"use strict";return this._data.label;};m.prototype.getIcon=function(){"use strict";return this._data.icon;};m.prototype.isSelected=function(){"use strict";return this._selected;};m.prototype.select=function(){"use strict";if(this.isDisabled())return false;g.addClass(this._root,"_54nd");this._selected=true;};m.prototype.deselect=function(){"use strict";g.removeClass(this._root,"_54nd");this._selected=false;};m.prototype.render=function(){"use strict";var n=l.render.call(this);if(this._data.selected)g.addClass(n,"_54nd");return n;};i(m.prototype,{_selected:false});e.exports=m;});
__d("SelectableMenu",["Menu","arrayContains","createArrayFrom"],function(a,b,c,d,e,f){var g=b('Menu'),h=b('arrayContains'),i=b('createArrayFrom');for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(){"use strict";if(g!==null)g.apply(this,arguments);}l.prototype.focusAnItem=function(){"use strict";for(var o=0;o<this._items.length;o++)if(n(this._items[o]))if(this._focusItem(this._items[o])!==false)return true;return k.focusAnItem.call(this);};l.prototype.setValue=function(o){"use strict";if(!this._root)this._render();var p=i(o);this._items.forEach(function(q){if(m(q))if(h(p,q.getValue())){q.select();}else if(n(q))q.deselect();});this.inform('change',this._getSelection());};l.prototype._handleItemClick=function(o,p){"use strict";if(!m(o))return k._handleItemClick.call(this,o,p);var q=this.inform('itemclick',{item:o,event:p});if(q)return;if(this._config.multiple){var r=n(o)?o.deselect():o.select();if(r!==false)this.inform('change',this._getSelection());}else{if(!n(o))if(o.select()!==false){this._items.forEach(function(s){if(n(s)&&s!==o)s.deselect();});this.inform('change',this._getSelection());}this.done();}return o.handleClick();};l.prototype._getSelection=function(){"use strict";var o=[];this._items.forEach(function(p){if(n(p))o.push({label:p.getLabel(),value:p.getValue(),item:p});});if(!this._config.multiple)o=o[0];return o;};function m(o){return o.select&&o.deselect&&o.isSelected;}function n(o){return m(o)&&o.isSelected();}e.exports=l;});
__d("ReactMenu",["Menu","MenuItem","MenuSelectableItem","MenuTheme","SelectableMenu","cx","flattenArray","joinClasses","merge"],function(a,b,c,d,e,f){var g=b('Menu'),h=b('MenuItem'),i=b('MenuSelectableItem'),j=b('MenuTheme'),k=b('SelectableMenu'),l=b('cx'),m=b('flattenArray'),n=b('joinClasses'),o=b('merge'),p=Array.prototype.slice;function q(r,s){if(!Array.isArray(s))s=p.call(arguments,1);var t={ctor:g,menuitems:m(s||[]),config:{theme:j,maxheight:r?r.maxheight:null,className:r?r.className:null}};return o(t,r);}q.SelectableMenu=function(r,s){if(!Array.isArray(s))s=p.call(arguments,1);var t={ctor:k,menuitems:m(s),config:{className:n("_57di",r?r.className:null),theme:j,multiple:r&&r.multiple,maxheight:r?r.maxheight:null}};return o(t,r);};q.Item=function(r,s){if(!Array.isArray(s))s=p.call(arguments,1);var t={ctor:h,reactChildren:s};return o(t,r);};q.SelectableItem=function(r,s){if(!Array.isArray(s))s=p.call(arguments,1);var t={ctor:i,reactChildren:s};return o(t,r);};e.exports=q;});
__d("UFIOrderingModeSelector.react",["InlineBlock.react","Link.react","LoadingIndicator.react","React","Image.react","ReactMenu","PopoverMenu.react","cx","ix"],function(a,b,c,d,e,f){var g=b('InlineBlock.react'),h=b('Link.react'),i=b('LoadingIndicator.react'),j=b('React'),k=b('Image.react'),l=b('ReactMenu'),m=b('PopoverMenu.react'),n=b('cx'),o=b('ix'),p=l.SelectableMenu,q=l.SelectableItem,r=j.createClass({displayName:'UFIOrderingModeSelector',getInitialState:function(){var s=null;this.props.orderingmodes.map(function(t){if(t.selected)s=t;});return {selectedMode:s};},onMenuItemClick:function(s,t){var u=t.item.getValue();this.props.orderingmodes.map(function(v){if(v.value===u)this.setState({selectedMode:v});}.bind(this));this.props.onOrderChanged(u);},render:function(){var s=null;if(this.props.currentOrderingMode!=this.state.selectedMode.value)s=i({className:"UFIOrderingModeSelectorLoading",color:"white",size:"small"});var t=p({onItemClick:this.onMenuItemClick},this.props.orderingmodes.map(function(u){return (q({key:u.value,value:u.value,selected:u.value===this.state.selectedMode.value},u.name));}.bind(this)));return (j.DOM.div({className:"UFIOrderingModeSelector"},s,g(null,m({className:"UFIOrderingModeSelectorPopover",menu:t,alignh:"right"},h(null,this.state.selectedMode.name,k({className:"UFIOrderingModeSelectorDownCaret",src:o('/images/ui/xhp/link/more/down_caret.gif')}))))));}});e.exports=r;});
__d("legacy:PageLikeButton",["PageLikeButton"],function(a,b,c,d){a.PageLikeButton=b('PageLikeButton');},3);
__d("MenuSeparator",["DOM","MenuItemInterface","cx"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('MenuItemInterface'),i=b('cx');for(var j in h)if(h.hasOwnProperty(j))l[j]=h[j];var k=h===null?null:h.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=h;function l(m){"use strict";h.call(this,m);this._data=m;}l.prototype.render=function(){"use strict";var m="_54ak";if(this._data.className)m+=' '+this._data.className;var n=this._data.label||'';return g.create('li',{className:m,role:'separator'},n);};e.exports=l;});
__d("XUIMenuTheme",["cx"],function(a,b,c,d,e,f){var g=b('cx');e.exports={className:"_558b"};});
__d("SwapButton",["DOM","Event","Focus","copyProperties"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('Event'),i=b('Focus'),j=b('copyProperties');function k(m,n,o){g.insertAfter(n,m);g.remove(n);o&&i.setWithoutOutline(m);}function l(m,n,o){"use strict";this._swapperButton=m;this._swappeeButton=n;h.listen(m,'click',k.bind(null,n,m,true));if(o)h.listen(n,'click',k.bind(null,m,n,true));}l.prototype.swap=function(m){"use strict";if(this._swapperButton.parentNode)k(this._swappeeButton,this._swapperButton,m);};l.prototype.unswap=function(m){"use strict";if(!this._swapperButton.parentNode)k(this._swapperButton,this._swappeeButton,m);};l.prototype.toggle=function(m){"use strict";if(this._swapperButton.parentNode){this.swap(m);}else this.unswap(m);};l.prototype.getCurrentButton=function(){"use strict";return this._swapperButton.parentNode?this._swapperButton:this._swappeeButton;};j(l.prototype,{_swapperButton:null,_swappeeButton:null});e.exports=l;});
__d("HoverButton",["AsyncRequest","CSS","DOM","URI","copyProperties","cx"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CSS'),i=b('DOM'),j=b('URI'),k=b('copyProperties'),l=b('cx');function m(n,o,p,q){"use strict";this._button=n;this._flyout=o;this._flyoutAjaxify=q;this._flyoutContent=p;o.subscribe('show',this._onShow.bind(this));o.subscribe('hide',this._onHide.bind(this));}m.prototype.showFlyoutBriefly=function(){"use strict";this.showFlyout();this._flyout.hideFlyoutDelayed(5000);};m.prototype.showFlyout=function(){"use strict";this._flyout.showFlyout(this._button,true);this._flyout.inform('show',this._button);};m.prototype.hideFlyout=function(){"use strict";this._flyout.hideFlyout(true);this._flyout.inform('hide',this._button);};m.prototype.enableButton=function(){"use strict";this._flyout.initNode(this._button);};m.prototype.disableButton=function(){"use strict";this.hideFlyout();this._flyout.deactivateNode(this._button);};m.prototype._onShow=function(n,o){"use strict";h.addClass(o,"_52nd");if(h.hasClass(o,'uiButton')||h.hasClass(o,"_42fu"))h.addClass(o,'selected');if(this._flyoutAjaxify){h.addClass(this._flyoutContent,'async_saving');new g().setURI(new j(this._flyoutAjaxify)).setHandler(function(p){h.removeClass(this._flyoutContent,'async_saving');i.setContent(this._flyoutContent,p.payload);}.bind(this)).send();this._flyoutAjaxify=null;}};m.prototype._onHide=function(n,o){"use strict";h.removeClass(o,"_52nd");if(h.hasClass(o,'uiButton')||h.hasClass(o,"_42fu"))h.removeClass(o,'selected');};m.prototype.destroy=function(){"use strict";this.hideFlyout();this._flyout.destroy();};m.prototype.suppressNextMouseEnter=function(){"use strict";this._flyout.setActiveNode(this._button);};k(m.prototype,{_button:null,_flyout:null,_flyoutAjaxify:null,_flyoutContent:null});e.exports=m;});
__d("HoverFlyout",["Arbiter","ArbiterMixin","DataStore","Event","Keys","arrayContains","mixin","removeFromArray","shield"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('DataStore'),j=b('Event'),k=b('Keys'),l=b('arrayContains'),m=b('mixin'),n=b('removeFromArray'),o=b('shield'),p=m(h);for(var q in p)if(p.hasOwnProperty(q))s[q]=p[q];var r=p===null?null:p.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=p;function s(t,u,v,w){"use strict";if(t){this._showDelay=v;this._hideDelay=w;this.init(t);if(u)this.initNode(u);}g.subscribe('SwapButtonDEPRECATED/focusOnJoinButton',o(this.hideFlyout,this),g.SUBSCRIBE_ALL);}s.prototype.init=function(t){"use strict";this._flyout=t;this._showDelay=this._showDelay||0;this._hideDelay=this._hideDelay||100;this._showTimeout=null;this._hideTimeout=null;this._flyoutSubscriptions=[this._flyout.subscribe('mouseenter',this._onFlyoutMouseEnter.bind(this)),this._flyout.subscribe('mouseleave',o(this.hideFlyout,this))];this._nodes=[];this._dataStoreUnique='HoverFlyout_'+Date.now()+'_listeners';return this;};s.prototype.initNode=function(t){"use strict";if(l(this._nodes,t))return this;this._nodes.push(t);i.set(t,this._dataStoreUnique,[j.listen(t,'mouseenter',this._onNodeMouseEnter.bind(this,t)),j.listen(t,'mouseleave',o(this.hideFlyout,this)),j.listen(t,'click',this._onNodeMouseEnter.bind(this,t)),j.listen(t,'keydown',this._onNodeKeyEscape.bind(this))]);return this;};s.prototype.deactivateNode=function(t){"use strict";var u=i.get(t,this._dataStoreUnique);if(u)while(u.length)u.pop().remove();n(this._nodes,t);};s.prototype.setShowDelay=function(t){"use strict";this._showDelay=t;return this;};s.prototype.setHideDelay=function(t){"use strict";this._hideDelay=t;return this;};s.prototype.showFlyout=function(t,u){"use strict";this.setActiveNode(t);if(u){this._flyout.setContext(t).show();this.inform('show',t);}else this._showTimeout=setTimeout(this.showFlyout.bind(this,t,true),this._showDelay);return this;};s.prototype.hideFlyout=function(t){"use strict";clearTimeout(this._showTimeout);if(t){this._flyout.hide();this._activeNode&&this.inform('hide',this._activeNode);this._activeNode=null;}else this._hideTimeout=setTimeout(this.hideFlyout.bind(this,true),this._hideDelay);};s.prototype.hideFlyoutDelayed=function(t){"use strict";clearTimeout(this._showTimeout);clearTimeout(this._hideTimeout);this._hideTimeout=setTimeout(this.hideFlyout.bind(this,true),t);};s.prototype.getActiveNode=function(){"use strict";return this._activeNode;};s.prototype.setActiveNode=function(t){"use strict";clearTimeout(this._hideTimeout);if(this._activeNode&&this._activeNode!==t)this.hideFlyout(true);this._activeNode=t;return this;};s.prototype.clearNodes=function(){"use strict";for(var t=this._nodes.length;t>0;t--)this.deactivateNode(this._nodes[t-1]);};s.prototype.destroy=function(){"use strict";while(this._flyoutSubscriptions.length)this._flyout.unsubscribe(this._flyoutSubscriptions.pop());this.clearNodes();};s.prototype._onNodeMouseEnter=function(t){"use strict";if(this._activeNode===t){clearTimeout(this._hideTimeout);}else this.showFlyout(t);};s.prototype._onFlyoutMouseEnter=function(){"use strict";clearTimeout(this._hideTimeout);};s.prototype._onNodeKeyEscape=function(event){"use strict";if(j.getKeyCode(event)===k.ESC){this._activeNode&&this.inform('hide',this._activeNode);this._activeNode=null;}};e.exports=a.HoverFlyout||s;});