/*!CK:3613254847!*//*1386184970,173209391*/

if (self.CavalryLogger) { CavalryLogger.start_js(["n4\/aK"]); }

__d("MercuryMessageSourceTags",[],function(a,b,c,d,e,f){e.exports={CHAT:"source:chat",MOBILE:"source:mobile",MESSENGER:"source:messenger",EMAIL:"source:email"};});
__d("MercuryTimePassed",[],function(a,b,c,d,e,f){e.exports={TODAY:0,WEEK_AGO:1,CURRENT_YEAR:3,OTHER_YEAR:4,MONTH_AGO:2};});
__d("MessagingEvent",[],function(a,b,c,d,e,f){e.exports={UNSUBSCRIBE:"unsubscribe",DELIVERY_RECEIPT:"delivery_receipt",REPORT_SPAM_MESSAGES:"report_spam_messages",DELIVER_FAST_PAST:"deliver_fast_path",DELETE_MESSAGES:"delete_messages",READ_RECEIPT:"read_receipt",SENT_PUSH:"sent_push",READ:"read",CHANGE_MUTE_SETTINGS:"change_mute_settings",ERROR:"error",UNMARK_SPAM:"unmark_spam",UNREAD:"unread",DELIVER_LOG:"deliver_log",DELIVER:"deliver",READ_ALL:"read_all",MESSENGER_STATUS:"messenger_status",TAG:"tag",MORE_THREADS:"more_threads",DELETE:"delete",REPORT_SPAM:"report_spam",SUBSCRIBE:"subscribe"};});
__d("BlobFactory",["emptyFunction"],function(a,b,c,d,e,f){var g=b('emptyFunction'),h,i=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder;if(a.Blob){var j;try{new a.Blob();j=true;}catch(k){j=false;}h={getBlob:function(l,m){l=l||[];m=m||{};if(j){return new a.Blob(l,m);}else{var n=new i();for(var o=0;o<l.length;o++)n.append(l[o]);return n.getBlob(m.type);}},isSupported:g.thatReturnsTrue};}else h={getBlob:function(){},isSupported:g.thatReturnsFalse};e.exports=h;});
__d("URLMatcher",[],function(a,b,c,d,e,f){var g='!"#%&\'()*,-./:;<>?@[\\]^_`{|}',h='\u2000-\u206F\u00ab\u00bb\uff08\uff09',i='(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])',j='(?:(?:ht|f)tps?)://',k='(?:(?:'+i+'[.]){3}'+i+')',l='\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]',m='(?:\\b)www\\d{0,3}[.]',n='[^\\s'+g+h+']',o='(?:(?:(?:[.:\\-_%@]|'+n+')*'+n+')|'+l+')',p='(?:[.][a-z]{2,4})',q='(?::\\d+){0,1}',r='(?=[/?#])',s='(?:'+'(?:'+j+o+q+')|'+'(?:'+k+q+')|'+'(?:'+l+q+')|'+'(?:'+m+o+p+q+')|'+'(?:'+o+p+q+r+')'+')',t='[/#?]',u='\\([^\\s()<>]+\\)',v='[^\\s()<>?#]+',w=new RegExp(s,'im'),x='^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]',y=new RegExp(x,'im'),z='(?:'+'(?:'+t+')'+'(?:'+'(?:'+u+'|'+v+')*'+')*'+')*',aa=new RegExp('('+'(?:'+s+')'+'(?:'+z+')'+')','im'),ba=new RegExp('('+'(?:'+j+o+q+')|'+'(?:'+m+o+p+q+')'+')'),ca=/[\s'";]/,da=new RegExp(t,'im'),ea=new RegExp('[\\s!"#%&\'()*,./:;<>?@[\\]^_`{|}\u00ab\u00bb\u2000-\u206F\uff08\uff09]','im'),fa=new RegExp('[\\s()<>?#]','im'),ga=new RegExp('\\s()<>'),ha=function(oa){if(oa&&oa.indexOf('@')!=-1){return (ba.exec(oa))?oa:null;}else return oa;},ia=function(oa){return ja(oa,aa);},ja=function(oa,pa){var qa=(pa.exec(oa)||[])[1]||null;return ha(qa);},ka=function(oa){return w.exec(oa);},la=function(oa){return !ca.test(oa.charAt(oa.length-1));},ma=function(oa){do{var pa=w.exec(oa);if(!pa)return null;var qa=false;if(pa[0][0]==='['&&pa.index>0&&oa[pa.index-1]==='@'){var ra=y.exec(pa[0]);if(ra){qa=true;oa=oa.substr(pa.index+ra[0].length);}}}while(qa);var sa=oa.substr(pa.index+pa[0].length);if(sa.length===0||!(da.test(sa[0])))return ha(pa[0]);var ta=0,ua=0,va=1,wa=0,xa=ua;for(var ya=1;ya<sa.length;ya++){var za=sa[ya];if(xa===ua){if(za==='('){wa=wa+1;xa=va;}else if(da.test(za)||!(ea.test(za))){ta=ya;}else if(fa.test(za))break;}else if(za==='('){wa=wa+1;}else if(za===')'){wa=wa-1;if(wa===0){xa=ua;ta=ya;}}else if(ga.test(za))break;}return ha(pa[0]+sa.substring(0,ta+1));},na={};na.permissiveMatch=ia;na.matchToPattern=ja;na.matchHost=ka;na.trigger=la;na.match=ma;e.exports=na;});
__d("formatDate",["DateFormatConfig","fbt","invariant"],function(a,b,c,d,e,f){var g=b('DateFormatConfig'),h=b('fbt'),i=b('invariant'),j=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],k=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m=["January","February","March","April","May","June","July","August","September","October","November","December"],n=['',"st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","st","nd","rd","th","th","th","th","th","th","th","st"];function o(s,t,u){u=u||{};if(!t||!s)return '';if(typeof s==='string')s=parseInt(s,10);if(typeof s==='number')s=new Date(s*1000);i(s instanceof Date);i(!isNaN(s.getTime()));i(s.getTime()<1e+15);if(typeof t!=='string'){var v=q();for(var w in v){var x=v[w];if(x.start<=s.getTime()&&t[x.name]){t=t[x.name];break;}}}var y;if(u.skipPatternLocalization||r()||t.length===1){y=t;}else{i(g.formats[t]);y=g.formats[t];}var z=u.utc?'getUTC':'get',aa=s[z+'Date'](),ba=s[z+'Day'](),ca=s[z+'Month'](),da=s[z+'FullYear'](),ea=s[z+'Hours'](),fa=s[z+'Minutes'](),ga=s[z+'Seconds'](),ha=s[z+'Milliseconds'](),ia='';for(var ja=0;ja<y.length;ja++){var ka=y.charAt(ja);switch(ka){case '\\':ja++;ia+=y.charAt(ja);break;case 'd':ia+=p(aa,2);break;case 'j':ia+=aa;break;case 'S':ia+=n[aa];break;case 'D':ia+=j[ba];break;case 'l':ia+=k[ba];break;case 'F':case 'f':ia+=m[ca];break;case 'M':ia+=l[ca];break;case 'm':ia+=p(ca+1,2);break;case 'n':ia+=ca+1;break;case 'Y':ia+=da;break;case 'y':ia+=(''+da).slice(2);break;case 'a':if(ea<12){ia+="am";}else ia+="pm";break;case 'A':if(ea<12){ia+="AM";}else ia+="PM";break;case 'g':ia+=(ea===0||ea===12)?12:ea%12;break;case 'G':ia+=ea;break;case 'h':if(ea===0||ea===12){ia+=12;}else ia+=p(ea%12,2);break;case 'H':ia+=p(ea,2);break;case 'i':ia+=p(fa,2);break;case 's':ia+=p(ga,2);break;case 'X':ia+=p(ha,3);break;default:ia+=ka;}}return ia;}function p(s,t){return Array(t-(''+s).length+1).join('0')+s;}function q(){var s=new Date(),t=s.getTime(),u=s.getFullYear(),v=s.getDate()-((s.getDay()-g.weekStart+6)%7),w=new Date(u,s.getMonth()+1,0).getDate(),x=new Date(u,1,29).getMonth()===1?366:365,y=1000*60*60*24;return [{name:'today',start:s.setHours(0,0,0,0)},{name:'withinDay',start:t-y},{name:'thisWeek',start:new Date(s.getTime()).setDate(v)},{name:'withinWeek',start:t-y*7},{name:'thisMonth',start:s.setDate(1)},{name:'withinMonth',start:t-y*w},{name:'thisYear',start:s.setMonth(0)},{name:'withinYear',start:t-y*x},{name:'older',start:-Infinity}];}o.periodNames=['today','thisWeek','thisMonth','thisYear','withinDay','withinWeek','withinMonth','withinYear','older'];function r(){if(!window||!window.location)return false;var s=window.location.pathname,t='/intern';return s.substr(0,t.length)===t;}e.exports=o;});
__d("AsyncUploadBase",["ArbiterMixin","AsyncRequest","AsyncResponse","BrowserSupport","Form","copyProperties","mixin","removeFromArray"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('AsyncRequest'),i=b('AsyncResponse'),j=b('BrowserSupport'),k=b('Form'),l=b('copyProperties'),m=b('mixin'),n=b('removeFromArray'),o=m(g);for(var p in o)if(o.hasOwnProperty(p))r[p]=o[p];var q=o===null?null:o.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=o;function r(t){"use strict";this.setURI(t);}r.prototype.setAllowCrossOrigin=function(t){"use strict";this._allowCrossOrigin=!!t;return this;};r.prototype.setData=function(t){"use strict";this._data=t;return this;};r.prototype.setLimit=function(t){"use strict";this._limit=t;return this;};r.prototype.setRelativeTo=function(t){"use strict";this._relativeTo=t;return this;};r.prototype.setStatusElement=function(t){"use strict";this._statusElement=t;return this;};r.prototype.setURI=function(t){"use strict";this._uri=t;return this;};r.prototype.suspend=function(){"use strict";this._suspended=true;return this;};r.prototype.resume=function(){"use strict";this._suspended=false;this._processQueue();return this;};r.prototype.isUploading=function(){"use strict";return this._inFlight;};r.prototype._createFileUpload=function(t,u,v){"use strict";return new s(t,u,v);};r.prototype._parseFiles=function(t){"use strict";var u={};for(var v in t){var w=t[v];if(Array.isArray(w)){u[v]=w;}else{u[v]=[];if(w instanceof window.FileList){for(var x=0;x<w.length;x++)u[v].push(w.item(x));}else if(w instanceof window.File||w instanceof window.Blob)u[v].push(w);}}return u;};r.prototype._processQueue=function(){"use strict";if(this._suspended)return;while(this._pending.length<this._limit){if(!this._waiting.length)break;var t=this._waiting.shift();this._processUpload(t);this._pending.push(t);}};r.prototype._processUpload=function(t){"use strict";var u=k.createFormData(t.getData()||this._data);if(t.getFile()){u.append(t.getName(),t.getFile());var v=t.getFile().uploadID;if(v)u.append('upload_id',v);}var w=new h().setAllowCrossOrigin(this._allowCrossOrigin).setURI(this._uri).setRawData(u).setStatusElement(this._statusElement).setHandler(this._success.bind(this,t)).setErrorHandler(this._failure.bind(this,t)).setUploadProgressHandler(this._progress.bind(this,t)).setInitialHandler(this._initial.bind(this,t));if(this._relativeTo)w.setRelativeTo(this._relativeTo);w.send();t.setAsyncRequest(w);this._inFlight=true;this.inform('start',t);};r.prototype._abort=function(t){"use strict";n(this._waiting,t);t.abort();};r.prototype._initial=function(t){"use strict";this.inform('initial',t);};r.prototype._success=function(t,u){"use strict";this._complete(t);this.inform('success',t.handleSuccess(u));this._processQueue();};r.prototype._failure=function(t,u){"use strict";this._complete(t);if(this.inform('failure',t.handleFailure(u))!==false)i.defaultErrorHandler(u);this._processQueue();};r.prototype._progress=function(t,event){"use strict";this.inform('progress',t.handleProgress(event));};r.prototype._complete=function(t){"use strict";n(this._pending,t);if(!this._pending.length)this._inFlight=false;};r.isSupported=function(){"use strict";return j.hasFileAPI();};l(r.prototype,{_limit:10});function s(t,u,v){"use strict";this._name=t;this._file=u;this._data=v;this._success=null;this._response=null;this._progressEvent=null;this._request=null;}s.prototype.getName=function(){"use strict";return this._name;};s.prototype.getFile=function(){"use strict";return this._file;};s.prototype.getData=function(){"use strict";return this._data;};s.prototype.isComplete=function(){"use strict";return this._success!==null;};s.prototype.isSuccess=function(){"use strict";return this._success===true;};s.prototype.getResponse=function(){"use strict";return this._response;};s.prototype.getProgressEvent=function(){"use strict";return this._progressEvent;};s.prototype.setAsyncRequest=function(t){"use strict";this._request=t;return this;};s.prototype.isWaiting=function(){"use strict";return !this._request;};s.prototype.abort=function(){"use strict";this._request&&this._request.abort();this._request=null;};s.prototype.handleSuccess=function(t){"use strict";this._success=true;this._response=t;this._progressEvent=null;return this;};s.prototype.handleFailure=function(t){"use strict";this._success=false;this._response=t;this._progressEvent=null;return this;};s.prototype.handleProgress=function(event){"use strict";this._progressEvent=event;return this;};e.exports=r;});
__d("AsyncUploadRequest",["AsyncUploadBase"],function(a,b,c,d,e,f){var g=b('AsyncUploadBase');for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";if(g!==null)g.apply(this,arguments);}j.prototype.setFiles=function(k){"use strict";this._files=this._parseFiles(k);return this;};j.prototype.send=function(){"use strict";if(this._inFlight)return;this._inFlight=true;this._uploads=[];for(var k in this._files)this._files[k].forEach(function(l){this._uploads.push(this._createFileUpload(k,l));}.bind(this));if(this._uploads.length){this._waiting=this._uploads.slice(0);this._pending=[];this._processQueue();}else this._processUpload(this._createFileUpload(null,null));};j.prototype._processQueue=function(){"use strict";i._processQueue.call(this);if(!this._pending.length&&!this._waiting.length)this.inform('complete',this._uploads);};j.isSupported=function(){"use strict";return g.isSupported();};e.exports=j;});
__d("DOMWrapper",[],function(a,b,c,d,e,f){var g,h,i={setRoot:function(j){g=j;},getRoot:function(){return g||document.body;},setWindow:function(j){h=j;},getWindow:function(){return h||self;}};e.exports=i;});
__d("Flash",["DOMWrapper","QueryString","UserAgent","copyProperties","guid","htmlSpecialChars"],function(a,b,c,d,e,f){var g=b('DOMWrapper'),h=b('QueryString'),i=b('UserAgent'),j=b('copyProperties'),k=b('guid'),l=b('htmlSpecialChars'),m={},n,o=g.getWindow().document;function p(u){var v=o.getElementById(u);if(v)v.parentNode.removeChild(v);delete m[u];}function q(){for(var u in m)if(m.hasOwnProperty(u))p(u);}function r(u){return u.replace(/\d+/g,function(v){return '000'.substring(v.length)+v;});}function s(u){if(!n){if(i.ie()>=9)window.attachEvent('onunload',q);n=true;}m[u]=u;}var t={embed:function(u,v,w,x){var y=k();u=l(u).replace(/&amp;/g,'&');w=j({allowscriptaccess:'always',flashvars:x,movie:u},w||{});if(typeof w.flashvars=='object')w.flashvars=h.encode(w.flashvars);var z=[];for(var aa in w)if(w.hasOwnProperty(aa)&&w[aa])z.push('<param name="'+l(aa)+'" value="'+l(w[aa])+'">');var ba=v.appendChild(o.createElement('span')),ca='<object '+(i.ie()?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ':'type="application/x-shockwave-flash"')+'data="'+u+'" '+(w.height?'height="'+w.height+'" ':'')+(w.width?'width="'+w.width+'" ':'')+'id="'+y+'">'+z.join('')+'</object>';ba.innerHTML=ca;var da=ba.firstChild;s(y);return da;},remove:p,getVersion:function(){var u='Shockwave Flash',v='application/x-shockwave-flash',w='ShockwaveFlash.ShockwaveFlash',x;if(navigator.plugins&&typeof navigator.plugins[u]=='object'){var y=navigator.plugins[u].description;if(y&&navigator.mimeTypes&&navigator.mimeTypes[v]&&navigator.mimeTypes[v].enabledPlugin)x=y.match(/\d+/g);}if(!x)try{x=(new ActiveXObject(w)).GetVariable('$version').match(/(\d+),(\d+),(\d+),(\d+)/);x=Array.prototype.slice.call(x,1);}catch(z){}return x;},checkMinVersion:function(u){var v=t.getVersion();if(!v)return false;return r(v.join('.'))>=r(u);},isAvailable:function(){return !!t.getVersion();}};e.exports=t;});
__d("TextMetrics",["Event","DOM","Style","UserAgent","debounce"],function(a,b,c,d,e,f){var g=b('Event'),h=b('DOM'),i=b('Style'),j=b('UserAgent'),k=b('debounce'),l;function m(){if(typeof l==='undefined'){var p=h.create('div',{className:'webkitZoomTest'}),q=function(){h.appendContent(document.body,p);l=100/p.clientHeight;h.remove(p);};g.listen(window,'resize',k(q,100));q();}return l;}function n(p){var q=p.clientWidth,r=(i.get(p,'-moz-box-sizing')=='border-box');if(r)return q;var s=i.getFloat(p,'paddingLeft')+i.getFloat(p,'paddingRight');return q-s;}function o(p,q){this._node=p;this._flexible=!!q;var r='textarea',s='textMetrics';if(this._flexible){r='div';s+=' textMetricsInline';}this._shadow=h.create(r,{className:s});var t=['fontSize','fontStyle','fontWeight','fontFamily','wordWrap'];t.forEach(function(v){i.set(this._shadow,v,i.get(p,v));}.bind(this));var u=i.get(p,'lineHeight');if(j.chrome()||j.webkit())u=Math.round(parseInt(u,10)*m())+'px';i.set(this._shadow,'lineHeight',u);document.body.appendChild(this._shadow);}o.prototype.measure=function(p){var q=this._node,r=this._shadow;p=(p||q.value)+'...';if(!this._flexible){var s=n(q);i.set(r,'width',Math.max(s,0)+'px');}h.setContent(r,p);return {width:r.scrollWidth,height:r.scrollHeight};};o.prototype.destroy=function(){h.remove(this._shadow);};e.exports=o;});
__d("Token",["CSS","DataStore","DOM","tx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DataStore'),i=b('DOM'),j=b('tx');function k(l,m){"use strict";this.info=l;this.paramName=m;}k.prototype.getInfo=function(){"use strict";return this.info;};k.prototype.getText=function(){"use strict";return this.info.text;};k.prototype.getValue=function(){"use strict";return this.info.uid;};k.prototype.isFreeform=function(){"use strict";return !!this.info.freeform;};k.prototype.setSelected=function(l){"use strict";g.conditionClass(this.getElement(),'uiTokenSelected',l);return this;};k.prototype.getElement=function(){"use strict";if(!this.element)this.setElement(this.createElement());return this.element;};k.prototype.setElement=function(l){"use strict";h.set(l,'Token',this);this.element=l;return this;};k.prototype.isRemovable=function(){"use strict";return g.hasClass(this.element,'removable');};k.prototype.createElement=function(l,m){"use strict";var n=this.paramName,o=this.getText(),p=this.getValue(),q=i.create('a',{href:'#','aria-label':j._("Remove {item}",{item:o}),className:'remove uiCloseButton uiCloseButtonSmall'});if(l)g.addClass(q,'uiCloseButtonSmallGray');var r=i.create('input',{type:'hidden',value:p,name:n+'[]',autocomplete:'off'}),s=i.create('input',{type:'hidden',value:o,name:'text_'+n+'[]',autocomplete:'off'}),t=i.create('span',{className:'removable uiToken'},[o,r,s,q]);if(l)g.addClass(t,'uiTokenGray');if(m){var u=i.create('i',{className:m});i.prependContent(t,u);}return t;};e.exports=k;});
__d("WeakToken",["CSS","Token"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('Token');for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(){"use strict";if(h!==null)h.apply(this,arguments);}k.prototype.createElement=function(){"use strict";var l=j.createElement.call(this,true,'UFIWeakReferenceIcon');g.addClass(l,'uiTokenWeakReference');return l;};e.exports=k;});
__d("Tokenizer",["Arbiter","ArbiterMixin","CSS","DataStore","DOM","DOMQuery","Event","Focus","Input","Keys","Parent","StickyPlaceholderInput","Style","TextMetrics","Token","UserAgent","WeakToken","copyProperties","createObjectFrom","emptyFunction","mixin"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('CSS'),j=b('DataStore'),k=b('DOM'),l=b('DOMQuery'),m=b('Event'),n=b('Focus'),o=b('Input'),p=b('Keys'),q=b('Parent'),r=b('StickyPlaceholderInput'),s=b('Style'),t=b('TextMetrics'),u=b('Token'),v=b('UserAgent'),w=b('WeakToken'),x=b('copyProperties'),y=b('createObjectFrom'),z=b('emptyFunction'),aa=20,ba=b("mixin"),ca=ba(h);for(var da in ca)if(ca.hasOwnProperty(da))fa[da]=ca[da];var ea=ca===null?null:ca.prototype;fa.prototype=Object.create(ea);fa.prototype.constructor=fa;fa.__superConstructor__=ca;function fa(ga,ha){"use strict";this.element=ga;this.typeahead=ha;this.input=ha.getCore().getElement();j.set(this.element,'Tokenizer',this);}fa.prototype.init=function(ga,ha,ia,ja){"use strict";this.init=z;this.tokenarea=ga;this.paramName=ha;if(!this.placeholder)this.placeholder=this.input.getAttribute('data-placeholder')||'';x(this,ja||{});this.initEvents();this.initTypeahead();this.reset(ia);this.initBehaviors();setTimeout(this.adjustWidth.bind(this),0);g.inform('Tokenizer/init',this,g.BEHAVIOR_PERSISTENT);};fa.prototype.reset=function(ga){"use strict";this.tokens=[];this.unique={};if(ga){this.populate(ga);}else k.empty(this.tokenarea);this.updateTokenarea();};fa.prototype.populate=function(ga){"use strict";var ha=[];this.tokens=this.getTokenElements().map(function(ia,ja){var ka=ga[ja];ha.push(this._tokenKey(ka));return this.createToken(ka,ia);},this);this.unique=y(ha,this.tokens);};fa.prototype.getElement=function(){"use strict";return this.element;};fa.prototype.getTypeahead=function(){"use strict";return this.typeahead;};fa.prototype.getInput=function(){"use strict";return this.input;};fa.prototype.initBehaviors=function(){"use strict";this.behaviors=this.behaviors||[];if(this.behaviors instanceof Array){this.behaviors.forEach(function(ia){ia.behavior(this,ia.config);}.bind(this));}else for(var ga in (this.behaviors||{})){var ha=window.TokenizerBehaviors&&window.TokenizerBehaviors[ga];ha.call(null,this,this.behaviors[ga]);}};fa.prototype.initTypeahead=function(){"use strict";var ga=this.typeahead.getCore();ga.resetOnSelect=true;ga.setValueOnSelect=false;ga.preventFocusChangeOnTab=true;if(this.inline){var ha=this.typeahead.getView();i.addClass(ha.getElement(),'uiInlineTokenizerView');}this.typeahead.subscribe('select',function(ia,ja){var ka=ja.selected;if('uid' in ka){this.updateInput();this.addToken(this.createToken(ka));}}.bind(this));this.typeahead.subscribe('blur',this.handleBlur.bind(this));};fa.prototype.handleBlur=function(event){"use strict";this.inform('blur',{event:event});this.updatePlaceholder();};fa.prototype.initEvents=function(){"use strict";var ga=this.handleEvents.bind(this),ha=v.firefox()<4?'keypress':'keydown';m.listen(this.tokenarea,{click:ga,keydown:ga});m.listen(this.input,'paste',this.paste.bind(this));m.listen(this.input,ha,this.keydown.bind(this));};fa.prototype.handleEvents=function(event){"use strict";var ga=event.getTarget(),ha=ga&&this.getTokenElementFromTarget(ga);if(!ha)return;if(event.type!='keydown'||m.getKeyCode(event)==p.RETURN)this.processEvents(event,ga,ha);};fa.prototype.processEvents=function(event,ga,ha){"use strict";if(q.byClass(ga,'remove')){var ia=ha.nextSibling;ia=ia&&l.scry(ha.nextSibling,'.remove')[0];var ja=this.getTokenFromElement(ha);ja=this.addTokenData(ja,ga);this.removeToken(ja);this.focusOnTokenRemoval(event,ia);event.kill();}};fa.prototype.focusOnTokenRemoval=function(event,ga){"use strict";n.set(event.type=='keydown'&&ga||this.input);};fa.prototype.addTokenData=function(ga,ha){"use strict";return ga;};fa.prototype.keydown=function(event){"use strict";this.inform('keydown',{event:event});var ga=m.getKeyCode(event),ha=this.input;if(this.inline&&ga==p.BACKSPACE&&o.isEmpty(ha)){var ia=this.getLastToken();if(ia&&ia.isRemovable())this.removeToken(ia);}this.updateInput();};fa.prototype.paste=function(event){"use strict";this.inform('paste',{event:event});this.updateInput(true);};fa.prototype.focusInput=function(){"use strict";n.set(this.input);};fa.prototype.updateInput=function(ga){"use strict";if(!this.inline)return;setTimeout(function(){this.adjustWidth(this.input.value);if(ga)this.input.value=this.input.value;}.bind(this),20);r.setPlaceholderText(this.input,'');this.inform('resize');};fa.prototype.setPlaceholder=function(ga){"use strict";this.placeholder=ga;if(this.stickyPlaceholder)r.setPlaceholderText(this.input,ga);this.updatePlaceholder();};fa.prototype.updatePlaceholder=function(){"use strict";if(!this.inline||this.input.value)return;var ga=!this.tokens.length,ha='';if(ga||this.stickyPlaceholder){this.adjustWidth(this.placeholder);ha=this.placeholder;}else this.adjustWidth(this.input.value);r.setPlaceholderText(this.input,ha);};fa.prototype.adjustWidth=function(ga){"use strict";if(!this.inline||!this._getIsInDOM())return;if(!ga&&this.input.value==='')ga=this.placeholder;var ha=aa;if(ga!==this.placeholder||!this.getTokens().length||this.stickyPlaceholder){var ia=this._getMetrics().measure(ga);ha=ia.width+this._getWidthOffset()+10;}s.set(this.input,'width',ha+'px');this.inform('resize');};fa.prototype.getToken=function(ga){"use strict";return this.unique[ga]||null;};fa.prototype.getTokens=function(){"use strict";return this.tokens||[];};fa.prototype.getTokenElements=function(){"use strict";return l.scry(this.tokenarea,'span.uiToken');};fa.prototype.getTokenElementFromTarget=function(ga){"use strict";return q.byClass(ga,'uiToken');};fa.prototype.getTokenFromElement=function(ga){"use strict";return j.get(ga,'Token');};fa.prototype.getTokenValues=function(){"use strict";if(!this.tokens)return [];return this.tokens.map(function(ga){return ga.getValue();});};fa.prototype.getFirstToken=function(){"use strict";return this.tokens[0]||null;};fa.prototype.getLastToken=function(){"use strict";return this.tokens[this.tokens.length-1]||null;};fa.prototype.hasMaxTokens=function(){"use strict";return this.maxTokens&&this.maxTokens<=this.tokens.length;};fa.prototype.createToken=function(ga,ha){"use strict";var ia=this.getToken(this._tokenKey(ga));if(!ia)ia=ga.weak_reference?new w(ga,this.paramName):new u(ga,this.paramName);ha&&ia.setElement(ha);return ia;};fa.prototype.addToken=function(ga){"use strict";if(this.hasMaxTokens())return;var ha=this._tokenKey(ga.getInfo());if(ha in this.unique)return;this.unique[ha]=ga;this.tokens.push(ga);this.insertToken(ga);this.updateTokenarea();this.inform('addToken',ga);g.inform('Form/change',{node:this.element});};fa.prototype.insertToken=function(ga){"use strict";k.appendContent(this.tokenarea,ga.getElement());};fa.prototype.removeToken=function(ga){"use strict";if(!ga)return;var ha=this.tokens.indexOf(ga);if(ha<0)return;this.tokens.splice(this.tokens.indexOf(ga),1);delete this.unique[this._tokenKey(ga.getInfo())];k.remove(ga.getElement());this.updateTokenarea();this.inform('removeToken',ga);g.inform('Form/change',{node:this.element});};fa.prototype.removeAllTokens=function(){"use strict";this.reset();this.inform('removeAllTokens');};fa.prototype.updateTokenarea=function(){"use strict";var ga=this.typeahead.getCore(),ha=this.getTokenValues();if(this.excludeDuplicates){this._exclusions||(this._exclusions=ga.getExclusions());ga.setExclusions(ha.concat(this._exclusions));}ga.setEnabled(!this.hasMaxTokens());this.updateTokenareaVisibility();this.updatePlaceholder();this.inform('resize');};fa.prototype.updateTokenareaVisibility=function(){"use strict";i.conditionShow(this.tokenarea,this.tokens.length!==0);};fa.prototype._tokenKey=function(ga){"use strict";return ga.uid+(ga.freeform?':':'');};fa.prototype._getWidthOffset=function(){"use strict";if(this._widthOffset===null){var ga=this.input.clientWidth,ha=s.getFloat(this.input,'width');if(ga==ha){this._widthOffset=s.getFloat(this.input,'paddingLeft')+s.getFloat(this.input,'paddingRight');}else this._widthOffset=0;}return this._widthOffset;};fa.prototype._getMetrics=function(){"use strict";if(!this._metrics)this._metrics=new t(this.input,this.inline);return this._metrics;};fa.prototype._getIsInDOM=function(){"use strict";return this._isInDOM||(this._isInDOM=l.contains(document.body,this.input));};fa.getInstance=function(ga){"use strict";var ha=q.byClass(ga,'uiTokenizer');return ha?j.get(ha,'Tokenizer'):null;};fa.init=function(ga,ha){"use strict";ga.init(ha.tokenarea,ha.param_name,ha.initial_info,ha.options);};x(fa.prototype,{inline:false,maxTokens:null,excludeDuplicates:true,placeholder:'',_widthOffset:null,_metrics:null});e.exports=fa;});
__d("PhotosUploadWaterfall",["AsyncSignal"],function(a,b,c,d,e,f){var g=b('AsyncSignal'),h={APP_FLASH:'flash_pro',APP_SIMPLE:'simple',APP_ARCHIVE:'archive',APP_COMPOSER:'composer',APP_MESSENGER:'messenger',APP_HTML5:'html5',APP_CHAT:'chat',INSTALL_CANCEL:1,INSTALL_INSTALL:2,INSTALL_UPDATE:3,INSTALL_REINSTALL:4,INSTALL_PERMA_CANCEL:5,INSTALL_SILENT_SKIP:6,INSTALL_DOWNLOAD:7,CERROR_RESIZING_FAILED:6,CERROR_MARKER_EXTRACTION_FAILED:9,BEGIN:1,UPLOAD_START:4,ALL_UPLOADS_DONE:6,CLIENT_ERROR:7,RECOVERABLE_CLIENT_ERROR:12,IMAGES_SELECTED:9,UPGRADE_REQUIRED:11,VERSION:15,SELECT_START:18,SELECT_CANCELED:19,CANCEL:22,CANCEL_DURING_UPLOAD:83,ONE_RESIZING_START:2,ONE_UPLOAD_START:10,ONE_UPLOAD_DONE:29,ONE_RESIZING_DONE:34,PROGRESS_BAR_STOPPED:44,MISSED_BEAT:45,HEART_ATTACK:46,PUBLISH_START:100,PUBLISH_SUCCESS:101,PUBLISH_FAILURE:102,CLUSTERING_START:103,CLUSTERING_SUCCESS:104,CLUSTERING_FAILURE:105,SESSION_POSTED:72,POST_PUBLISHED:80,ONE_UPLOAD_CANCELED:81,ONE_UPLOAD_CANCELED_DURING_UPLOAD:82,RESIZER_AVAILABLE:20,OVERLAY_FIRST:61,ASYNC_AVAILABLE:63,FALLBACK_TO_FLASH:13,RETRY_UPLOAD:17,TAGGED_ALL_FACES:14,VAULT_IMAGES_SELECTED:62,VAULT_CREATE_POST_CANCEL:65,VAULT_SEND_IN_MESSAGE_CLICKED:66,VAULT_DELETE_CANCEL:68,VAULT_ADD_TO_ALBUM_CANCEL:74,VAULT_SHARE_IN_AN_ALBUM_CLICKED:76,VAULT_SHARE_OWN_TIMELINE_CLICKED:77,VAULT_SHARE_FRIENDS_TIMELINE_CLICKED:78,VAULT_SHARE_IN_A_GROUP_CLICKED:79,VAULT_SYNCED_PAGED_LINK_CLICKED:84,VAULTBOX:'vaultbox',GRID:'grid',SPOTLIGHT_VAULT_VIEWER:'spotlight_vault_viewer',REF_VAULT_NOTIFICATION:'vault_notification',sendSignal:function(i,j){new g('/ajax/photos/waterfall.php',{data:JSON.stringify(i)}).setHandler(j).send();}};e.exports=h;});
__d("ProgressBar",["CSS","DOM","Style","csx","cx","emptyFunction","requestAnimationFrame","removeFromArray","arrayContains"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('Style'),j=b('csx'),k=b('cx'),l=b('emptyFunction'),m=b('requestAnimationFrame'),n=b('removeFromArray'),o=b('arrayContains'),p=[];function q(t,u,v){"use strict";this._root=t;this._min=u||0;this._max=v||100;this._meter=h.find(t,"div._5e4k");this._meter2=h.scry(t,"div._5e2g")[0];this._initialPosition=0;this._position=0;this._initialVelocity=0;this._velocity=0;this._acceleration=0;this.useAcceleration=true;this._targetPosition=0;this._targetTime=0;this._startTime=null;this._onComplete=l;}q.prototype.getRoot=function(){"use strict";return this._root;};q.prototype.setPosition=function(t){"use strict";t=this._normalizePosition(t);this._initialPosition=t;this._position=t;this._updateMeter();this.stop();return this;};q.prototype.changeLabel=function(t){"use strict";var u=h.scry(this._root,"span._5e2h");u.forEach(function(v){h.setContent(v,t);});return this;};q.prototype.setCompleteHandler=function(t){"use strict";this._onComplete=t||l;return this;};q.prototype.setTarget=function(t,u){"use strict";this._stopAnimating();this._clearOnCompleteTimeout();this._targetPosition=t;var v=this._normalizePosition(t);this._targetTime=u;this._initialVelocity=this._velocity;this._initialPosition=this._position;if(this.useAcceleration){this._acceleration=2*(v-this._initialPosition-this._initialVelocity*u)/(u*u);}else{this._acceleration=0;this._velocity=this._initialVelocity=(v-this._initialPosition)/u;}if(this._position>=v){this._onComplete();}else this._start();return this;};q.prototype.setNoAcceleration=function(t){"use strict";this.useAcceleration=!t;return this;};q.prototype._clearOnCompleteTimeout=function(){"use strict";a.clearTimeout(this._onCompleteTimeout);};q.prototype.stop=function(){"use strict";this._clearOnCompleteTimeout();this._velocity=0;this._initialVelocity=0;this._acceleration=0;this._stopAnimating();return this;};q.prototype._start=function(){"use strict";this._startTime=Date.now();this._onCompleteTimeout=a.setTimeout(function(){this.setPosition(this._targetPosition);this._onComplete();}.bind(this),this._targetTime);this._startAnimating();return this;};q.prototype._loop=function(){"use strict";var t=Date.now()-this._startTime;this._position=(.5*this._acceleration*t*t)+(this._initialVelocity*t)+this._initialPosition;var u=this._velocity;this._velocity=this._acceleration*t+this._initialVelocity;var v=u<0!==this._velocity<0;if(this._position>this._normalizePosition(this._targetPosition)||v){this.setPosition(this._targetPosition);this._onComplete();}else this._updateMeter();};q.prototype._updateMeter=function(){"use strict";var t=Math.min(Math.max(this._position,0),1);g.conditionClass(this._meter,"_5e2d",t<=0);g.conditionClass(this._meter,"_5e4j",t>=1);t=t*100+'%';i.set(this._meter,'width',t);if(this._meter2){i.set(this._meter2,'left',t);i.set(this._meter2,'width',t);}};q.prototype._normalizePosition=function(t){"use strict";return Math.min(Math.max((t-this._min)/(this._max-this._min),0),1);};q.prototype._startAnimating=function(){"use strict";if(!o(p,this)){p.push(this);if(p.length===1)m(q.prototype._requestAnimationFrameCallback);}};q.prototype._stopAnimating=function(){"use strict";n(p,this);};q.prototype._requestAnimationFrameCallback=function(){"use strict";p.forEach(function(t){t._loop();});if(p.length)m(q.prototype._requestAnimationFrameCallback);};function r(t,u){t.setPosition(u);}function s(t,u,v){t.setTarget(u,v);}e.exports=q;e.exports.setTarget=s;e.exports.setPosition=r;});
__d("TypeaheadRegulateMemorializedUsers",["TokenizeUtil","copyProperties"],function(a,b,c,d,e,f){var g=b('TokenizeUtil'),h=b('copyProperties');function i(j){"use strict";this._typeahead=j;}i.prototype._filter=function(j,k){"use strict";if(j.type!=='user'||!j.memorialized)return true;var l=g.parse(j.text).tokens;if(l.length===1&&g.isExactMatch(k,j.text))return true;var m=this._typeahead.getData().getTextToIndex(j),n=g.parse(k).tokens;return (n.length>1&&g.isQueryMatch(k,m));};i.prototype.enable=function(){"use strict";this._filterRegistry=this._typeahead.getData().addFilter(this._filter.bind(this));};i.prototype.disable=function(){"use strict";this._filterRegistry.remove();this._filterRegistry=null;};h(i.prototype,{_filterRegistry:null});e.exports=i;});
__d("legacy:RegulateMemorializedUsersTypeaheadBehavior",["TypeaheadRegulateMemorializedUsers"],function(a,b,c,d){var e=b('TypeaheadRegulateMemorializedUsers');if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.regulateMemorializedUsers=function(f){f.enableBehavior(e);};},3);